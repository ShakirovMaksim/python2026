# Домашнее задание. Урок 33. Генераторы коллекций. list, dict, set comprehensions

## Краткая сводка
- **Проблемные блоки:** list comprehensions с форматированием строк и доп. условиями, аккуратная фильтрация и агрегация для dict/set comprehensions, контроль формата вывода.
- **Сильные стороны:** умеет строить comprehension без лишних циклов, правильно определяет род/фильтры.
- **Приоритеты:** отработать условное форматирование значений в выражении, тщательную проверку условий и единый стиль строк, вспомнить dict/set comprehension на примерах с фильтрацией.

## Задача 1. Повторение сложной темы — «цены под контролем»
- **Блок:** базовые list comprehensions с условным форматированием.
- **Описание:** маркетплейс выгружает список заказов `[(client, amount, city), ...]`. Нужен новый список строк `"Имя купил(а) на …"` с условиями:
  - города начинаются на букву `С` или `К` (без учёта регистра);
  - суммы ≥ 70 000 выводятся как `70K`, остальные как `7000₽`;
  - у имён на `а`/`я` глагол «купила», иначе «купил»;
  - исходный список не изменяем.
- **Пример входа:** `orders = [("Степан", 72000, "Самара"), ("Кира", 18000, "Казань"), ("Яна", 95000, "Сочи")]`
- **Ожидаемый вывод:** `['Степан купил на 72K', 'Кира купила на 18000₽', 'Яна купила на 95K']`
- **Критерии проверки:**
  1. Один list comprehension, без дополнительных циклов.
  2. Условный суффикс `K` или `₽` реализован прямо в выражении.
  3. Фильтр по городам корректно работает с любым регистром.
  4. Строка строго соответствует шаблону.

## Задача 2. Закрепление практики — «ожидающие возвраты»
- **Блок:** list comprehension с фильтрацией по нескольким полям и форматированием.
- **Описание:** есть список словарей `returns = [{"id": 101, "status": "pending", "items": 3, "reason": "size"}, ...]`. Нужно одной конструкцией получить строки `"Возврат #ID: ITEMS позиций (reason)"` только для записей:
  - `status == "pending"`;
  - `1 <= items <= 4`;
  - `reason` не пустой.
- **Граничные случаи:** `items` может быть 1 (нужно «1 позиция»), 2–4 («позиции»), ≥5 не включаем.
- **Подсказка:** используйте словарь замены для слова «позиция/позиции».
- **Критерии проверки:**
  1. Один comprehension без промежуточных списков.
  2. Корректное склонение слова «позиция».
  3. Фильтр одновременно проверяет статус, количество и причину.
  4. Исходный список не модифицируется.

## Задача 3. Интеграция блоков — «аналитика отделов»
- **Блоки:** dict comprehension + расчёты на основе данных.
- **Описание:** структура `departments = [{"name": "Support", "budget": 300000, "employees": [{"name": "...", "salary": 60000, "remote": True}, ...]}, ...]`.
  - Сформируй словарь `dept_summary`, где ключ — название отдела, значение — кортеж `(ceil(avg_salary), remote_share)`:
    - `avg_salary` — средняя зарплата сотрудников, округлённая вверх `math.ceil`.
    - `remote_share` — доля удалённых сотрудников с двумя знаками после запятой.
  - Включать только отделы, где сотрудников ≥ 3 и бюджет ≥ суммы зарплат.
- **Мини-пример:** отдел с тремя сотрудниками (60k, 70k, 80k) и бюджетом 210k → `(70, 0.33)`.
- **Критерии проверки:**
  1. Один dict comprehension, никаких внешних циклов.
  2. Фильтр по количеству сотрудников и бюджету.
  3. Округления выполнены указанными способами.
  4. Исходные данные не изменяются.

## Задача 4. Подготовка к следующему уроку — «сетевой фильтр событий»
- **Блок:** set comprehension как подготовка к темам про обработку потоков данных.
- **Описание:** дан список логов `logs = ["user:event:duration", ...]`. Нужно получить множество пользователей, у которых:
  - событие `"upload"` или `"sync"`;
  - `duration` (целое число секунд) больше 120.
  - Строка делится ровно на три части через `":"`.
- **Пример входа:** `["alex:upload:180", "ben:sync:75", "lana:sync:135", "max:update:300"]` → `{"alex", "lana"}`.
- **Требования:**
  1. Единственный set comprehension без доп. циклов.
  2. Проверка количества сегментов и преобразование длительности в `int`.
  3. Игнорировать строки с неверным форматом (не 3 сегмента).
  4. Исходный список не менять.

## Дедлайны и критерии оценки
- Сдать до **15 декабря, 23:59 (UTC+05:00)** одним коммитом в папку `homework/`.
- Проверяется только первый коммит, попавший в `homework/`.
- Каждая задача оценивается по трём группам критериев:
  1. **Функциональность (50%)** — соблюдение условий, корректные фильтры и формат.
  2. **Качество кода (30%)** — лаконичный comprehension, отсутствие лишних конструкций, читабельность.
  3. **Стиль и проверки (20%)** — аккуратный вывод, обработка граничных случаев, отсутствие побочных эффектов.

**Важно:** все задачи уникальны. При копировании или использовании готовых решений ДЗ не принимается. Анализируется только первый коммит, добавьте все файлы за один раз.
