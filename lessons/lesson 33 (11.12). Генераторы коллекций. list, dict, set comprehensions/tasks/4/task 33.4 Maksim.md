# Задание 33.4. Генераторы коллекций. list, dict, set comprehensions

## Блок урока
«Set comprehensions» позволяют собирать уникальные значения из вложенных структур и сразу накладывать фильтры.

## Условие задачи
**Сложность**: <span style="color: #c62828">● сложный</span>. примерное время: 15–20 минут

Есть список словарей `services`. Каждый словарь содержит ключи `"name"`, `"regions"`, `"incidents"`. Поле `"regions"` — список кодов регионов, где запущен сервис. Поле `"incidents"` — список словарей `{ "region": str, "priority": str }`. Построй одним выражением set comprehension множество `risky_regions`, куда попадут регионы, у которых есть хотя бы один инцидент с приоритетом `"high"`, и которые одновременно присутствуют в списке `regions` сервиса. Если регион встречается у нескольких сервисов, он всё равно должен появиться один раз.

## Пример входных данных
```
services = [
    {
        "name": "billing",
        "regions": ["eu", "us"],
        "incidents": [
            {"region": "eu", "priority": "high"},
            {"region": "us", "priority": "low"}
        ]
    },
    {
        "name": "metrics",
        "regions": ["apac"],
        "incidents": [
            {"region": "apac", "priority": "high"},
            {"region": "eu", "priority": "medium"}
        ]
    }
]
```

## Пример выходных данных
```
{'eu', 'apac'}
```

## Критерии успешного выполнения
- Множество `risky_regions` формируется одним set comprehension.
- Регион попадает в итог только если он указан в `regions` и есть инцидент с приоритетом `high`.
- Каждый регион присутствует в результате не более одного раза.
- Исходная структура `services` остаётся неизменной.

## Подсказки
- Можно перебирать сервисы и их инциденты внутри comprehension через вложенный цикл.
- Используй проверку `incident["priority"] == "high"` и вхождение `incident["region"] in service["regions"]`.
- Для читаемости вынеси множество допустимых приоритетов во внешнюю переменную, если нужно.

## Частые ошибки и ограничения
- Не оборачивай comprehension в `set()` и не используй дополнительные циклы с `add`.
- Не забывай проверять принадлежность региона обоим условиям.
- Следи, чтобы списки в задании не превышали пяти пунктов.
