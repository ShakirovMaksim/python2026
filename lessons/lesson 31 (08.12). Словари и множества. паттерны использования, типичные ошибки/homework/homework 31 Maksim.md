# Домашнее задание. Урок 31. Словари и множества. паттерны использования, типичные ошибки

## Студент: Maksim

Ты уверенно справился с основными заданиями урока. В ДЗ мы закрепим аккуратную работу с `dict.get`, безопасную мутацию словарей и операции с множествами, а также подготовимся к следующему уроку про генераторы коллекций.

## Задача 1. Повторение сложной темы

Ты помогаешь техподдержке онлайн‑платформы. По списку событий нужно собрать информацию о последнем статусе каждого тикета и безопасно выводить данные даже для неизвестных идентификаторов.

- **Блок урока:** словарь как структура быстрого доступа, метод `get` с значением по умолчанию.
- **Входные данные:** список кортежей `events`, каждый кортеж имеет вид `(ticket_id, status)`; список `requested` с идентификаторами, по которым нужно показать статус.

Пример входных данных:
```python
events = [
    (101, "new"),
    (102, "in_progress"),
    (101, "resolved"),
]
requested = [101, 105]
```

### Требуется

1. Собрать словарь `last_status`, где ключ. `ticket_id`, значение. последний статус этого тикета.
2. Для каждого идентификатора из списка `requested` вывести строку вида:
   ```text
   <id> -> <status>
   ```
   Если данные по тикету отсутствуют, печатай `<id> -> нет записей`.
3. Обязательно используй `dict.get(key, default)` для безопасного чтения из словаря.

### Критерии проверки

1. Список кортежей преобразуется в словарь без потери последнего статуса.
2. Для всех обращений к словарю используется `get` с осмысленным значением по умолчанию.
3. Код не падает, если в `requested` есть id, которых нет в словаре.
4. Формат вывода строго соответствует заданию (одна строка на каждый id).

---

## Задача 2. Закрепление ключевой практики

Ты настраиваешь учёт времени работы проектных команд. Нужно накопить общее количество часов по каждой команде и аккуратно удалить команды, которые завершили проект.

- **Блок урока:** мутация словарей, `get` и `pop` с запасным значением.
- **Входные данные:** список кортежей `shifts` и список строк `finished`.

Пример входных данных:
```python
shifts = [
    ("backend", 6),
    ("frontend", 4),
    ("backend", 5),
    ("design", 3),
]
finished = ["frontend", "ml"]
```

### Требуется

1. Создать словарь `hours`, где ключ. название команды, значение. суммарное количество часов.
2. Для каждой команды из `finished` безопасно удалить запись из `hours` с помощью `pop(key, default)`.
3. После удаления вывести финальный словарь `hours`.

### Граничные случаи

1. В `finished` может быть команда, которой нет в `hours` . удаление не должно вызывать `KeyError`.
2. Список `finished` может быть пустым . в этом случае словарь просто выводится без изменений.

### Критерии проверки

1. Суммирование значений для повторяющихся ключей реализовано через `get` или аналогичный приём.
2. Удаление выполняется только из словаря `hours` и всегда использует запасное значение в `pop`.
3. Код корректно обрабатывает пустой список `finished` и несуществующие команды.
4. На экран выводится только окончательное состояние словаря с понятной подписью.

---

## Задача 3. Интеграция блоков

Ты пишешь мини‑аналитику для рассылки. Есть список писем с информацией о том, какой пользователь и с какого домена отправил сообщение. Нужно посчитать активность по пользователям и выделить домены, с которыми нужно работать отдельно.

- **Блоки урока:** словари для подсчёта, множества для работы с уникальными значениями.

Пример входных данных:
```python
messages = [
    {"user": "alice", "email": "alice@example.com"},
    {"user": "bob", "email": "bob@work.ru"},
    {"user": "alice", "email": "alice@work.ru"},
    {"user": "carol", "email": "carol@example.com"},
]
trusted_domains = {"example.com"}
```

### Требуется

1. Собрать словарь `message_count`, где ключ. имя пользователя, значение. количество отправленных сообщений.
2. Построить множество всех доменов, встречающихся в адресах отправителей.
3. Найти множество доменов, которые **не** входят в `trusted_domains`.
4. Распечатать отчёт в удобном виде, например:
   ```text
   Сообщений по пользователям:
   alice -> 2
   bob -> 1
   carol -> 1

   Подозрительные домены:
   work.ru
   ```

### Критерии проверки

1. Подсчёт по пользователям реализован через словарь (без дополнительных списков‑счётчиков).
2. Домены выделяются из email‑адресов корректно (часть после символа `@`).
3. Операции с множествами используются для поиска доменов вне доверенного списка.
4. Отчёт печатается в структурированном и читаемом виде.

---

## Задача 4. Подготовка к следующему занятию

Дальше по курсу будут генераторы коллекций. Здесь ты подготовишь данные циклом, а потом сможешь мысленно переписать решение в comprehension.

Ты анализируешь лог просмотров курсов. Для каждого события есть язык программирования и количество минут просмотра.

Пример входных данных:
```python
views = [
    ("python", 15),
    ("sql", 5),
    ("python", 20),
    ("git", 10),
    ("python", 7),
]
limit = 20
```

### Требуется

1. Собрать словарь `total_minutes`, где ключ. название технологии, значение. суммарное время просмотра.
2. На основе этого словаря создать **новый** словарь `filtered`, куда попадут только те технологии, у которых суммарное время больше или равно `limit`.
3. Вывести оба словаря в формате:
   ```text
   Всего минут:
   python -> 42
   ...

   Популярные технологии (порог 20):
   python -> 42
   ...
   ```

### Критерии проверки

1. Подсчёт суммарного времени реализован через цикл и словарь.
2. Фильтрация по порогу оформлена как отдельный шаг . не нужно смешивать накопление и фильтрацию в одном сложном выражении.
3. Код легко переписывается в comprehension (четко видны «источник данных» и «условие»).
4. Формат вывода понятный и опирается на реальные значения из словаря.

---

## Дедлайны и критерии оценки

- Срок сдачи и формат отправки устанавливает преподаватель в общем канале группы.
- Проверяется корректность работы с словарями и множествами, аккуратная обработка отсутствующих ключей и читаемость кода.
- Анализируется только **первый** коммит, попавший в папку `homework/` для этого урока. Если нужно добавить несколько файлов, загружай их одним коммитом.
